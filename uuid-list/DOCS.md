# Deterministic UUID v4 Generator

Этот проект генерирует **все** UUID версии 4, но не в банальном линейном порядке, а посредством **хаотичной** перестановки на пространстве 2^122. 

## Основные файлы

- **FeistelPermutation.hs** — реализует перестановку через Feistel-сеть.  
---
1. Пример: Feistel-сеть для 122-битного пространства.
2. Делим 122 бита на (L=61, R=61). Делаем 8 раундов (numRounds=8).
3. Раунд-функция roundFunction r i key -> Integer (2^61).
4. Это НЕ крипто-стойкий алгоритм, но даёт заметно более "хаотичную" перестановку, чем простая LCG.
---
- **UUIDList.hs** — функции `nthUUID(n)` и `uuidPosition(uuid)`. Вставляет биты версии=4 и варианта=10, форматирует UUID.  
---
1. У нас 122 свободных бита (из 128), т.к. 6 бит заняты версией (4) и вариантом (10).
2. С помощью FeistelPermutation мы строим хаотическую перестановку на [0..2^122-1].
3. Далее вставляем/извлекаем эти 122 бита в 128-битное число, проставляя:
>   - version=4 (биты 48..51)
>   - variant=10 (биты 64..65)
4. Преобразуем индекс n -> 122-бит x
5. Затем x -> 128-бит UUID
6. Затем форматируем в "xxxxxxxx-xxxx-4xxx-Vxxx-xxxxxxxxxxxx"
---
- **Main.hs** — консольный интерфейс:  
  - `./myuuid nth <число>`  
  - `./myuuid pos <uuid>`

## Сборка

```bash
ghc app/Main.hs src/UUIDList.hs src/FeistelPermutation.hs -o myuuid
```

## Пример Использования 

>./myuuid nth 0
>  => 4e0f2549-cbdb-4f0e-a904-02bc58beea2c 
>./myuuid pos 4e0f2549-cbdb-4f0e-a904-02bc58beea2c
>  => 0

